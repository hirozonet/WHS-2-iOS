1. 通信に利用するService UUID, Characteristic UUID
----------------

WHS-2との通信に利用するUUID

- Service UUID

  63DD7335-6155-4919-8B85-8E329C8E5C79

- Characteristic UUID

  E8DE8CB7-830B-4704-AD62-3324DC554564 :Notify　計測モードで、計測データの受信に利用する

  E8DE8CB7-830B-4704-AD62-3324DC554564 :Read Write　設定モードで、設定値の書込みと読み込みに利用する　




2. 計測モード
----------------

#### WHS-2が送信する間隔 ####

|モード|間隔|
|:------|:------|
|心拍周期(RRI) - 加速度移動平均 モード |心拍単位 |
|心拍周期(RRI) - 加速度ピークホールド モード |心拍単位 |
|心拍波形(PQRST)モード |0.05秒間隔 |

#### WHS-2送信データフォーマット ####

16バイトのデータとして受信される

- 心拍周期(RRI) - 加速度移動平均 モード

|0  byte|1  byte|2  byte|3  byte|4-5  byte|6-7  byte|8  byte|9  byte|10  byte|11  byte|12  byte|13  byte|14  byte|15  byte|
|:------|:------|:------|:------|:-----|:-----|:-----|:-----|:----|:----|:----|:----|:----|:----|
|0x0f   |設定情報 |0xff   |連番   |ECG |温度 |加速度X |加速度Y |加速度Z |0x00 |0x00 |0x00 |0x00 |0x00 |

- 心拍周期(RRI) - 加速度ピークホールド モード

|0  byte|1  byte|2  byte|3  byte|4-5  byte|6-7  byte|8  byte|9  byte|10  byte|11  byte|12  byte|13  byte|14  byte|15  byte|
|:------|:------|:------|:------|:-----|:-----|:-----|:-----|:----|:----|:----|:----|:----|:----|
|0x0f  |設定情報 |0xff   |連番   |ECG |温度 |加速度X |加速度Y |加速度Z |-加速度X |-加速度Y |-加速度Z |0x00 |0x00 |

- 心拍波形(PQRST)モード

|0  byte|1  byte|2  byte|3  byte|4-5  byte|6  byte|7  byte|8  byte|9-10  byte|11  byte|12  byte|13  byte|14-15  byte|
|:------|:------|:------|:------|:------|:------|:------|:------|:------|:------|:------|:------|:------|
|0x0f   |設定情報 |0xff  |連番   |ECG   |加速度X |加速度Y |加速度Z |ECG(2) |加速度X(2)|加速度Y(2)|加速度Z(2)|温度 |


#### 設定情報について ####


設定情報1byteがもつデータ

|7  bit|6  bit|5  bit|4  bit|3  bit|2  bit|1  bit|0  bit|
|:------|:------|:------|:------|:------|:-----|:-----|:-----|
|電圧レベル |電圧レベル |信号飽和<br>0:不飽和<br>1:飽和|電圧状態<br>0:正常<br>1:低電圧| 　 |加速度モード<br>0:平均<br>1:ピーク |　|心拍モード<br>0:PQRST<br>1:RRI|


※ 量産品での変更

2bit(0bitと1bit)で、おおよその電池残量を把握できるように修正されています。<br>
11 => 100% , 10 => 75% , 01 => 50% , 00=> 25%となります。



3. 設定モード
----------------

#### Central送信コマンドと戻り値 ####

| 送信コマンド            | 内容                       |戻り値                          |
|:----------------------|:--------------------------|:------------------------------|
| A A (CR)              |設定モードを開始する           |A A , O K(CR)<br>A A , ? (CR)     |
| Z Z (CR)              |設定モードを終了する           |Z Z , O K(CR)<br>Z Z , ? (CR)     |
| S S (CR)              |計測モードを開始する           |S S , O K(CR)<br>S S , ? (CR)     |
| C 2 (CR)              |動作モード、加速度モードを読み出す|C 2 , 動作モード 加速度モード (CR) <br>動作モード 1:PQRST 2:RRI <br>加速度モード 0:Average 1:Peak|
| C 4 (CR)              |動作モードを読み出す           |C 4 , 動作モード (CR) <br>動作モード 1:PQRST 2:RRI|
| C 4 , 動作モード (CR)   |動作モードを設定する           |C 4 , O K (CR)<br>C 4 , ? (CR)    |
| C 5 (CR)              |加速度モードを読み出す          |C 5 , 加速度モード(CR) <br>加速度モード 0:Average 1:Peak|
| C 5 , 加速度モード (CR) |加速度モードを設定する          |C 5 , OK (CR)<br>C 5 , ? (CR)     |
| F 7 (CR)              |外装シリアル番号を読み出す       |F 7 , 外装シリアル番号 (CR)      |
| F 8 (CR)              |基板シリアル番号を読み出す       |F 8 , 基板シリアル番号 (CR)      |
| T 5 (CR)              |メインファームバージョンを読み出す |T 5 , バージョン (CR)           |
| R 3 (CR)              |BLEファームバージョンを読み出す   |R 3 , バージョン (CR)           |

